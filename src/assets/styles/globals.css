/*
 * Globale Styles für die Chat-CRM Anwendung.
 * Beinhaltet Layout-Variablen, Grundstruktur und responsive Regeln.
 */

 :root {
  --nav-compact: 50px; /* Breite der Navigation */
  --list-width: 270px; /* Breite der Spalte mit der Listenansicht */
  --main-base: 640px; /* Basisbreite des Hauptinhaltsbereichs */
  --panel-min: 320px; /* Mindestbreite für das Seitenpanel */
  --duration: 0.5s; /* Standarddauer für Animationen und Übergänge */
  --easing: cubic-bezier(0.2, 0.8, 0.2, 1); /* Standard-Easing-Kurve */
}

/* Standard-Einstellung für das Box-Modell */
* {
  box-sizing: border-box; /* Padding und Border werden in die Breite eingerechnet */
}

/* HTML- und Body-Elemente nehmen die komplette Höhe ein */
html, body, #app {
  height: 100dvh;
  margin: 0;
}

/* Grundlegende Body-Styles und Schriftarten */
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
}

/* Hauptcontainer der Anwendung */
.app {
  display: flex;
  flex-direction: row;
  height: 100dvh;
  overflow: hidden;
  background: #0b0f14;
  color: #e6edf3;
}





/* ----- Layout mit vier Spalten (Nav/Liste/Hauptbereich/Panel) ----- */
.columns {
  display: flex;
  flex-direction: row;
  height: 100dvh;
  width: 100%;
  min-width: 0;     /* Container darf schrumpfen */
  overflow: hidden; /* nichts auslaufen lassen */
  /* transition: margin-left var(--duration) var(--easing);*/
}


/* Standard für alle direkten Flex-Kinder: schrumpfen erlaubt */
.columns > * {
  min-width: 0;     /* WICHTIG: erlaubt echtes Shrinking/ellipsis etc. */
  flex-shrink: 1;   /* darf schrumpfen */
}


/* ----- Navigationsleiste ----- */
.nav {
  height: 100dvh;
  width: auto;
  min-width: var(--nav-compact);
  max-width: var(--nav-compact);
  background: #121822;
  border-right: 1px solid #1e2733;
  transition: width var(--duration) var(--easing), transform var(--duration) var(--easing); /* sanfte Übergänge */
  z-index: 20;
}







/* Innenleben der Navigation */
.nav-inner {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 2px 0px 2px 0px;
  gap: 3px;
}

/* Bereiche innerhalb der Navigation */
.nav-top, .nav-bottom {
  padding: 2px;
  display: grid;
  gap: 5px;
}

/* Mittlerer Bereich mit Scrollverhalten */
.nav-middle {
  position: relative;
  flex: 1 1 auto;
  overflow: hidden;
}

/* Scrollcontainer in der Navigation */
.nav-scroll {
  position: absolute;
  inset: 0;
  overflow: auto;
  padding: 2px;
  display: grid;
  gap: 5px;
  border-radius: 12px;
  grid-auto-rows: max-content;
  align-items: start;       /* jedes Grid-Item oben ausrichten */
  align-content: start;     /* gesamte Grid-Collection oben halten */
  scrollbar-width: none; /* Scrollbar in Firefox ausblenden */
}

/* Scrollbar in WebKit ausblenden */
.nav-scroll::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Pfeile, die auf den Scrollstatus hinweisen */
.nav-arrow {
  position: absolute;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

/* Button innerhalb des Pfeils */
.nav-arrow > button {
  pointer-events: auto;
  background: #1b2431;
  border: 1px solid #293243;
  border-radius: 10px;
  padding: 8px 12px;
  opacity: 0.8;
}

/* Positionierung der Pfeile */
.nav-arrow.top {
  top: 1px;
}
.nav-arrow.bottom {
  bottom: 1px;
}







/* ----- Listenansicht ----- */
.list {
  flex: 0 0 var(--list-width);
  width: auto;
  min-width: var(--list-width);
  max-width: var(--list-width);
  border-right: 1px solid #1e2733;
  background: #0f141b;
  transition: transform var(--duration) var(--easing);
  z-index: 5;
}



/* ----- Hauptbereich ----- */
.main {
  flex: 0 0 var(--main-base); /* Basisbreite definiert */
  width: var(--main-base);
  min-width: 0;               /* darf schrumpfen */
  max-width: none;
  border-right: 1px solid #1e2733;
  background: #0c1117;

}



/* ----- Seitenpanel ----- */
.panel {
  flex: 1 1 auto;
  min-width: var(--panel-min);
  background: #0f141b;
}







/* ----- Vollbildzustände für bestimmte Bereiche ----- */
.fullscreen-main .nav, 
.fullscreen-main .list, 
.fullscreen-main .panel, 
.fullscreen-main .lv-btn-sh {
  display: none !important;
}
.fullscreen-main .main {
  flex: 1 1 auto;
  max-width: 100%;
}
.fullscreen-panel .nav,
.fullscreen-panel .list, 
.fullscreen-panel .main,
.fullscreen-panel .lv-btn-sh {
  display: none !important;
}
.fullscreen-panel .panel {
  flex: 1 1 auto;
  max-width: 100%;
}






/* ----- Buttons ----- */
.nav-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  background: #17202b;
  border: 1px solid #243041;
  color: #e6edf3;
  padding: 8px 10px 8px 10px;
  border-radius: 10px;
  cursor: pointer;
  transition: transform 0.15s ease, background 0.15s ease; /* kleine Animation bei Interaktion */
}
.nav-btn:hover {
  background: #1b2533;
}
.nav-btn.active {
  outline: 2px solid #3b82f6;
}
.nav-btn .emoji {
  font-size: 16px;
  line-height: 1;
}









.mv-title {
  flex: 1 1 auto;  
  min-width: 0;  
  color: #e6edf3;
  padding-left: 5px;
  font-weight: 600;
  font-size: 16x;
  letter-spacing: .2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mv-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 4px 2px 4px 2px;
  border-bottom: 1px solid #1e2733;
}
.mv-left {
  margin-right: auto;    
  display: flex;
  align-items: center;
  min-width: 0; 
}
.mv-right {
  margin-left: auto;                
  display: flex;

  align-items: center;
  gap: 5px;
}
.lv-btn, .lv-btn-sh {
  appearance: none;
  border: 1px solid #243041;
  background: #17202b;
  color: #e6edf3;
  padding: 8px 15px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  transition: background .15s ease, border-color .15s ease, transform .04s ease;
}
.lv-btn:hover { background: #1b2533; border-color: #2b3a4c; }
.lv-btn:active { transform: translateY(1px); }
.lv-btn:focus-visible { outline: 2px solid #3b82f6; outline-offset: 2px; }

.lv-btn-ghost {
  background: #141b24;
  border-color: #223041;
}
.lv-btn-ghost:hover {
  background: #1a2330;
  border-color: #2a3a4e;
}












/* ----- Abzeichen (Badges) ----- */
.badge {
  position: absolute;
  right: 0.15rem;
  bottom: 0.05rem;
  font-size: 0.65rem;
  line-height: 1;
  padding: 0.15rem 0.35rem;
  border-radius: 999px;
  border: 1px solid #0b0f14;
}
.badge.green {
  background: #0f5132;
  color: #b6f7d2;
}
.badge.yellow {
  background: #664d03;
  color: #ffe69c;
}
.badge.red {
  background: #842029;
  color: #f8d7da;
}






/* Dünne, dezente Scrollbars (Firefox + WebKit) */
.thin-scroll {
  scrollbar-width: thin;
  scrollbar-color: #304156 transparent;
}
.thin-scroll::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.thin-scroll::-webkit-scrollbar-track {
  background: transparent;
}
.thin-scroll::-webkit-scrollbar-thumb {
  background: #304156;
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: content-box;
}
.thin-scroll:hover::-webkit-scrollbar-thumb {
  background: #3a4d67;
  border-color: transparent;
}









/* === 1) Mobile: 320–767px === */
@media (max-width: 767px) {
  /* Bühne */
  .app { overflow: hidden; }
  .columns {
    position: relative;
    width: 100vw;
    height: 100dvh;
    overflow: hidden;
  }

  /* Ein Track, drei Slides -> EIN transform, alles synchron */
  .track {
    display: flex;
    flex-direction: row;
    width: 300vw; /* 3 x 100vw */
    height: 100dvh;
    transform: translate3d(var(--mobile-x, 0), 0, 0);
    transition: transform var(--duration) var(--easing);
    will-change: transform;
  }

  .slide {
    flex: 0 0 100vw;
    width: 100vw;
    height: 100dvh;
    overflow: hidden;
    position: relative;
  }

/* Slide 1: nav + list teilen sich 100vw */
.slide--navlist {
  display: flex;
  flex-direction: row;
  min-width: 0; /* wichtig, damit die List schrumpfen darf */
}

.slide--navlist .nav {
  flex: 0 0 var(--nav-compact);
  width: var(--nav-compact);
  min-width: var(--nav-compact);
  max-width: var(--nav-compact);
  height: 100dvh;
  border-right: 1px solid #1e2733;
}

/* Origin ohne calc
.slide--navlist .list {
  flex: 1 1 0%;
  min-width: 0;
  max-width: none;
  width: auto;
  height: 100dvh;
  border-right: 0;
  overflow: auto;
} */

.slide--navlist .list {
  flex: 0 0 calc(100vw - var(--nav-compact));
  width: calc(100vw - var(--nav-compact));
  min-width: 0;
  max-width: calc(100vw - var(--nav-compact));
  height: 100dvh;
  border-right: 0;
  overflow: auto; /* optional */
}

  /* Slide 2: main füllt ganz */
  .slide--main {
    display: flex;
  }
  .slide--main .main {
    flex: 1 1 auto;
    min-width: 0;
    height: 100dvh;
    border-right: 0;
  }

  /* Slide 3: panel füllt ganz */
  .slide--panel {
    display: flex;
  }
  .slide--panel .panel {
    flex: 1 1 auto;
    min-width: 0;
    height: 100dvh;
  }

  /* WICHTIG: Keine Einzel-Transitions/Transforms an nav/list/main/panel! */
  .nav, .list, .main, .panel {
    transform: none !important;
    transition: none !important;
  }

  /* Zustände: nur Track verschieben */
  .app.mobile-nav-list { --mobile-x: 0vw; }
  .app.mobile-main     { --mobile-x: -100vw; }
  .app.mobile-panel    { --mobile-x: -200vw; }

  /* Offscreen-Interaktion sperren (optional) */
  .app.mobile-nav-list .slide--main,
  .app.mobile-nav-list .slide--panel { pointer-events: none; }
  .app.mobile-main .slide--navlist,
  .app.mobile-main .slide--panel { pointer-events: none; }
  .app.mobile-panel .slide--navlist,
  .app.mobile-panel .slide--main { pointer-events: none; }

  /* Dezent: Scrollbars ausblenden */
  .thin-scroll { scrollbar-width: none; }
  .thin-scroll::-webkit-scrollbar { width: 0; height: 0; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .track { transition: none !important; }
}










/* === 2) Tablet: 768–1366px === */
@media (min-width: 768px) and (max-width: 1366px) {
  .columns {
    display: flex;
    flex-direction: row;
    width: 100%;
    min-width: 0;
    height: 100dvh;
    overflow: hidden;
  }

  /* Nav bleibt kompakt links */
  .nav {
    flex: 0 0 var(--nav-compact);
    min-width: var(--nav-compact);
    max-width: var(--nav-compact);
    height: 100dvh;
    border-right: 1px solid #1e2733;
    transform: translateX(0);
  }

  /* Liste fix 270px */
  .list {
    display: block;
    flex: 0 0 var(--list-width);
    min-width: var(--list-width);
    max-width: var(--list-width);
    height: 100dvh;
    border-right: 1px solid #1e2733;
  }

  /* NEU: rechter Bereich als Track mit 2 Slides (Main | Panel) */
  .t-track {
    position: relative;
    flex: 1 1 0%;
    width: 0;          /* flex-gesteuert */
    min-width: 0;
    height: 100dvh;
    overflow: hidden;
  }

  .t-strip {
    display: flex;
    flex-direction: row;
    height: 100%;
    transform: translate3d(var(--tablet-x, 0), 0, 0);
    transition: transform var(--duration) var(--easing);
    will-change: transform;
  }

  .t-slide { 
    flex: 0 0 100%;
    width: 100%;
    height: 100%;
    overflow: hidden;
    position: relative;
  }

  /* Inhalt in den Slides füllt den Bereich */
  .t-main .main,
  .t-panel .panel {
    width: 100%;
    height: 100%;
    min-width: 0;
    border-right: 0; /* sauberer Übergang */
  }

  /* ALTE Tablet-Regeln deaktivieren/ersetzen:
     KEIN display:none mehr für .panel/.main auf Tablet! */
  .panel { display: block !important; }
  .app.tablet-panel .main  { display: block !important; }
  .app.tablet-panel .panel { display: block !important; }

  /* Zustände: nur der Track verschiebt sich */
  .app:not(.tablet-panel) { --tablet-x: 0%; }
  .app.tablet-panel       { --tablet-x: -100%; }

  /* Eingeklappte Liste darf überlagern (wie bisher) */
  .app.list-collapsed .list {
    position: absolute;
    left: var(--nav-compact);
    top: 0;
    bottom: 0;
    transform: translateX(-100%);
    pointer-events: none;
  }
}














/* === 3) Desktop: >= 1367px === */
@media (min-width: 1367px) {
  .nav {
    transform: translateX(0);
  }
  .list {
    display: block;
  }
  .main {
    display: block !important; /* sicherstellen, dass Main sichtbar ist */
  }
  .panel {
    display: block !important; /* sicherstellen, dass Panel sichtbar ist */
    min-width: var(--panel-min);
  }
  .app.list-collapsed .list {
    position: absolute;
    left: var(--nav-compact);
    top: 0;
    bottom: 0;
    transform: translateX(-100%);  /* fährt raus */
    pointer-events: none;
  }
  /* when the list is collapsed, allow the main view to occupy the freed space */
  .app.list-collapsed .main {
    flex-basis: calc(var(--main-base) + var(--list-width));
  }
}

