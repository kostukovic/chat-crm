/*
 * Globale Styles für die Chat-CRM Anwendung.
 * Beinhaltet Layout-Variablen, Grundstruktur und responsive Regeln.
 */

 :root {
  --nav-compact: 50px; /* Breite der Navigation */
  --list-width: 270px; /* Breite der Spalte mit der Listenansicht */
  --main-base: 640px; /* Basisbreite des Hauptinhaltsbereichs */
  --panel-min: 320px; /* Mindestbreite für das Seitenpanel */
  --duration: 0.5s; /* Standarddauer für Animationen und Übergänge */
  --easing: cubic-bezier(0.2, 0.8, 0.2, 1); /* Standard-Easing-Kurve */
}

/* Standard-Einstellung für das Box-Modell */
* {
  box-sizing: border-box; /* Padding und Border werden in die Breite eingerechnet */
}

/* HTML- und Body-Elemente nehmen die komplette Höhe ein */
html, body, #app {
  height: 100dvh;
  margin: 0;
}

/* Grundlegende Body-Styles und Schriftarten */
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
}

/* Hauptcontainer der Anwendung */
.app {
  display: flex;
  flex-direction: row;
  height: 100dvh;
  overflow: hidden;
  background: #0b0f14;
  color: #e6edf3;
}

/* ----- Navigationsleiste ----- */
.nav {
  position: fixed; /* bleibt stets sichtbar */
  left: 0;
  top: 0;
  height: 100dvh;
  width: var(--nav-compact); /* Startbreite im kompakten Modus */
  background: #121822;
  border-right: 1px solid #1e2733;
  transition: width var(--duration) var(--easing), transform var(--duration) var(--easing); /* sanfte Übergänge */
}

/* Innenleben der Navigation */
.nav-inner {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 3px;
}

/* Bereiche innerhalb der Navigation */
.nav-top, .nav-bottom {
  padding: 2px;
  display: grid;
  gap: 5px;
}

/* Mittlerer Bereich mit Scrollverhalten */
.nav-middle {
  position: relative;
  flex: 1 1 auto;
  overflow: hidden;
}

/* Scrollcontainer in der Navigation */
.nav-scroll {
  position: absolute;
  inset: 0;
  overflow: auto;
  padding: 2px;
  display: grid;
  gap: 5px;
  border-radius: 15px;
  grid-auto-rows: max-content;
  align-items: start;       /* jedes Grid-Item oben ausrichten */
  align-content: start;     /* gesamte Grid-Collection oben halten */
  scrollbar-width: none; /* Scrollbar in Firefox ausblenden */
}

/* Scrollbar in WebKit ausblenden */
.nav-scroll::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Pfeile, die auf den Scrollstatus hinweisen */
.nav-arrow {
  position: absolute;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

/* Button innerhalb des Pfeils */
.nav-arrow > button {
  pointer-events: auto;
  background: #1b2431;
  border: 1px solid #293243;
  border-radius: 10px;
  padding: 8px 12px;
  opacity: 0.8;
}

/* Positionierung der Pfeile */
.nav-arrow.top {
  top: 1px;
}
.nav-arrow.bottom {
  bottom: 1px;
}

/* ----- Layout mit drei Spalten (Liste/Hauptbereich/Panel) ----- */
.columns {
  display: flex;
  flex-direction: row;
  height: 100dvh;
  margin-left: var(--nav-compact); /* Platz für die Navigation reservieren */
  transition: margin-left var(--duration) var(--easing);
}

/* ----- Listenansicht ----- */
.list {
  width: var(--list-width);
  min-width: var(--list-width);
  max-width: var(--list-width);
  border-right: 1px solid #1e2733;
  background: #0f141b;
}

/* ----- Hauptbereich ----- */
.main {
  width: var(--main-base);
  min-width: 320px;
  max-width: min(100%, var(--main-base));
  border-right: 1px solid #1e2733;
  background: #0c1117;
}

/* ----- Seitenpanel ----- */
.panel {
  min-width: var(--panel-min);
  flex: 1 1 auto;
  background: #0f141b;
}

/* ----- Vollbildzustände für bestimmte Bereiche ----- */
.fullscreen-main .list, .fullscreen-main .panel {
  display: none;
}
.fullscreen-main .main {
  flex: 1 1 auto;
  max-width: 100%;
}
.fullscreen-panel .list, .fullscreen-panel .main {
  display: none;
}
.fullscreen-panel .panel {
  flex: 1 1 auto;
}

/* ----- Buttons ----- */
.btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  background: #17202b;
  border: 1px solid #243041;
  color: #e6edf3;
  padding: 0.5rem 0.6rem;
  border-radius: 0.75rem;
  cursor: pointer;
  transition: transform 0.15s ease, background 0.15s ease; /* kleine Animation bei Interaktion */
}
.btn:hover {
  background: #1b2533;
}
.btn.active {
  outline: 2px solid #3b82f6;
}
.btn .emoji {
  font-size: 1.1rem;
  line-height: 1;
}
.btn .label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.btn.compact {
  justify-content: center;
}

/* ----- Abzeichen (Badges) ----- */
.badge {
  position: absolute;
  right: 0.15rem;
  bottom: 0.05rem;
  font-size: 0.65rem;
  line-height: 1;
  padding: 0.15rem 0.35rem;
  border-radius: 999px;
  border: 1px solid #0b0f14;
}
.badge.green {
  background: #0f5132;
  color: #b6f7d2;
}
.badge.yellow {
  background: #664d03;
  color: #ffe69c;
}
.badge.red {
  background: #842029;
  color: #f8d7da;
}

/* ----- Hilfsklassen ----- */
.section-title {
  font-size: 0.75rem;
  color: #9fb1c1;
  margin: 0.3rem 0.4rem;
}
hr.sep {
  border: none;
  border-top: 1px solid #1e2733;
  margin: 0.5rem 0;
}

/* Dünne, dezente Scrollbars (Firefox + WebKit) */
.thin-scroll {
  scrollbar-width: thin;
  scrollbar-color: #304156 transparent;
}
.thin-scroll::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.thin-scroll::-webkit-scrollbar-track {
  background: transparent;
}
.thin-scroll::-webkit-scrollbar-thumb {
  background: #304156;
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: content-box;
}
.thin-scroll:hover::-webkit-scrollbar-thumb {
  background: #3a4d67;
  border-color: transparent;
}

/* Grundstil für die Listen-Spalte inkl. Transition */
.list {
  transition: transform var(--duration) var(--easing);
}

/* Z-Ebenen für Navigation und Liste */
.nav {
  z-index: 20;
}
.list {
  z-index: 5;
}

/* === 1) Mobile: 320–677px === */
@media (max-width: 767px) {
  .columns {
    margin-left: 0;
    width: 100%;
  }

  /* Navigation + Liste füllen den gesamten Bildschirm */
  .mobile-nav-list .columns {
    margin-left: var(--nav-compact);
  }

  .mobile-nav-list .list {
    display: block;
    flex: 1 1 auto;
    width: auto;
    min-width: 0;
    max-width: none;
  }
  .mobile-nav-list .main {
    display: none !important;
  }
  .mobile-nav-list .panel {
    display: none !important;
  }

  /* Nur Hauptbereich sichtbar */
  .mobile-main .nav {
    transform: translateX(-100%);
  }
  .mobile-main .list {
    display: none !important;
  }
  .mobile-main .main {
    display: block;
    flex: 1 1 auto;
    max-width: 100%;
  }

  /* Nur Panel sichtbar */
  .mobile-panel .nav {
    transform: translateX(-100%);
  }
  .mobile-panel .list, .mobile-panel .main {
    display: none !important;
  }
  .mobile-panel .panel {
    display: block;
    flex: 1 1 auto;
    width: auto;
    min-width: 0;
    max-width: none;
    overflow: auto;
  }
}

/* === 2) Tablet: 768–1366px === */
@media (min-width: 768px) and (max-width: 1366px) {
  .columns {
    display: flex;
    flex-direction: row;
    margin-left: var(--nav-compact);
    width: 100%;
    min-width: 0; /* Container darf schrumpfen */
  }
  .nav {
    transform: translateX(0);
  }

  /* Liste bleibt fix 270px breit */
  .list {
    display: block;
    flex: 0 0 var(--list-width); /* Fixe Breite über Flex */
    width: auto;
    min-width: var(--list-width);
    max-width: var(--list-width);
  }

  /* Hauptbereich füllt den verbleibenden Platz */
  .main {
    display: block;
    flex: 1 1 0%; /* verbleibender Platz */
    width: 0; /* Basisbreite auf 0 für flexibles Verhalten */
    min-width: 0; /* Inhalt darf schrumpfen */
    max-width: none; /* nicht auf --main-base begrenzen */
    border-right: 0; /* optional: ohne Rand auf Tablets */
  }

  /* Panel wird auf Tablets ausgeblendet */
  .panel {
    display: none !important;
  }

  /* Einblendbare Liste, wenn sie zugeklappt ist */
  .app.list-collapsed .list {
    position: absolute;
    left: var(--nav-compact);
    top: 0;
    bottom: 0;
    transform: translateX(-100%);
    pointer-events: none; /* keine Interaktion, wenn ausgeblendet */

    /* Tablet-spezifischer Modus: Panel statt Main anzeigen */
    .app.tablet-panel .panel {
      display: block !important;
    }
    .app.tablet-panel .main {
      display: none !important;
    }
  }
}

/* === 3) Desktop: >= 1367px === */
@media (min-width: 1367px) {
  .columns {
    margin-left: var(--nav-compact);
  }
  .nav {
    transform: translateX(0);
  }
  .list {
    display: block;
  }
  .main {
    display: block;
  }
  .panel {
    display: block;
    min-width: var(--panel-min);
  }
  .app.list-collapsed .list {
    position: absolute;
    left: var(--nav-compact);
    top: 0;
    bottom: 0;
    transform: translateX(-100%);
    pointer-events: none;
  }
}

